# 刷机及 Root 教程


<!--more-->

## 刷机前准备

- 刷机前请解锁Bootloader，小米机型解锁链接如下：   
  [此处跳转小米手机解锁页面](http://www.miui.com/unlock/index.html)

- 成功解锁后，卡刷爱好者请下载专版 TWRP，线刷爱好者请备好 adb 环境。

- （类原生系统需要）下载 [Firmware](https://xiaomifirmwareupdater.com/#stable) 最新底包，根据你目前所在系统版本选择合适的底包。

- 下载刷机包，存在电脑里，然后务必退出小米（谷歌）账号!

## 刷机步骤

### 卡刷教程

#### 第一步

刷入 TWRP，在 **高级** 中选择 **签名Boot** 从而替换官方 Recovery，首先点击 **清除** 选项，如果刷入 MIUI 国际版或 MIUI 官改版请直接滑动下方滑块（三清）即可，如果刷入第三方类原生 ROM 建议选择四清，如需自定义清理请点击 **高级选项**。

>- **双清：勾选 Dalvik/Art cache、Cache**  
>  *双清适用于同一个 ROM 直接升级，刷内核或者补丁包，例如从 V6.2 升级到 V6.3 时，双清可以清理缓存，但是又不至于把用户数据和应用程序清除。*  
>- **三清：勾选 Dalvik/Art cache、Cache、Data**  
>  *当你不确定你下载的那个包是否真的可用时，建议选这个，万一下载的 ROM 无法刷入，不至于开不了机（如果你的手机里有另外一个绝对可以刷入的包做保底的话，忽略三清用四清或者两清）。*  
>- **四清：勾选 Dalvik/Art cache、System、Data、Cache**  
>  *一般在刷入第三方 ROM 之前都应该进行四清，这样可以避免刷完ROM之后出现无法进入系统，或者在使用某些设置和 APP 时出现问题。四清是数据清除最彻底的方式，该操作会将手机原有的系统和其他数据全部清空。所以在操作前如有必要请先进行相应的数据备份。*

#### 第二步

进入 **清除** 选项，选择 **格式化data**，输入 **yes** 即可。若格式化之后手机连接电脑无法识别磁盘，请重启至 TWRP 即可连接，或者使用 OTG 拓展连接U盘刷机。

#### 第三步

##### MIUI 国际及官改

回到主页面，此时用 USB 线将手机连接至电脑，将刷机包、Magisk 卡刷包拷贝至内置储存，拷贝结束后点击 **安装**，找到刷机包，勾选 **刷机结束后重启手机**，刷入即可。

##### 第三方类原生 ROM

回到主页面，此时用 USB 线将手机连接至电脑，将刷机包、底包、Magisk 卡刷包、GApps 卡刷包（microG 卡刷包）拷贝至内置储存，拷贝结束后点击 **安装**，找到底包，两项均不勾选刷入，成功后刷入第三方卡刷包（切记此时不要重启），接着：

- 若刷入 microG，请移步 [安装 microG 步骤](https://marasati.com/post/microg/)。
- 若刷入 GApps：

>1. 请先将手机重启至系统，然后重新进入到 TWRP。
>2. 进入 **清除**，选择 **高级选项**，勾选 **system**，选择 **重新调整空间**。
>3. 回到主页面，选择 **挂载**，勾选 **system** 以及 **将system挂载为已读**。
>4. 选择 GApps 卡刷包刷入后，双清进入系统即可。

#### 第四步（Root，无需求者可忽略）

无论任何时候都可以 Root，即使手机用了很长一段时间也可以，不必担心数据会被清空。  
事先下载好 Magisk 刷机包文件，拷入手机内存。选择 **挂载System分区** 和 **挂载system分区为只读** 后，刷入 Magisk 卡刷包即可。成功后，重启进入手机系统。

### 线刷教程有待补充~

## 谷歌框架开机验证

### 方法一

连接可翻墙网络。

### 方法二

无可翻墙网络时，不插入 SIM 卡，开机界面刚显示时迅速开启**飞行模式**，**切勿连接WiFi**。
